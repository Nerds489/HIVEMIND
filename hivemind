#!/usr/bin/env bash
#===============================================================================
# HIVEMIND Launcher - Runs from any directory
#===============================================================================

HIVEMIND_HOME="${HIVEMIND_HOME:-$HOME/.local/share/hivemind}"

if [[ ! -d "$HIVEMIND_HOME" ]]; then
    echo "Error: HIVEMIND not installed at $HIVEMIND_HOME"
    echo "Run the installer first."
    exit 1
fi

# Store launch directory for context
export HIVEMIND_LAUNCH_DIR="$(pwd)"

# Change to TUI directory and run
cd "$HIVEMIND_HOME/tui"

# Install dependencies if needed
if [[ ! -d ".venv" ]]; then
    echo "Setting up Python environment..."
    python3 -m venv .venv
    source .venv/bin/activate
    pip install -q -e .
else
    source .venv/bin/activate
fi

# Run TUI
exec python -m hivemind_tui "$@"
