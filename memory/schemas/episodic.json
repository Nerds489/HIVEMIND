{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://hivemind.local/schemas/episodic.json",
  "title": "Episodic Memory Content",
  "description": "Schema for episodic memory content - events, tasks, incidents, decisions",
  "type": "object",
  "required": ["episode_type", "title", "timestamp"],
  "properties": {
    "episode_type": {
      "type": "string",
      "enum": [
        "task",
        "incident",
        "decision",
        "conversation",
        "milestone",
        "deployment",
        "review",
        "meeting"
      ],
      "description": "Type of episode"
    },
    "title": {
      "type": "string",
      "maxLength": 200,
      "description": "Episode title"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "When the episode occurred"
    },
    "end_timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "When the episode ended (if duration)"
    },
    "duration_minutes": {
      "type": "number",
      "description": "Duration in minutes"
    },
    "severity": {
      "type": "string",
      "enum": ["P0", "P1", "P2", "P3", "P4"],
      "description": "Severity/priority level"
    },
    "status": {
      "type": "string",
      "enum": ["in_progress", "completed", "failed", "cancelled", "pending"],
      "description": "Episode status"
    },
    "participants": {
      "type": "array",
      "items": {"type": "string"},
      "description": "Agents/users involved"
    },
    "summary": {
      "type": "string",
      "description": "Brief summary"
    },
    "details": {
      "type": "object",
      "description": "Full episode details (type-specific)"
    },
    "timeline": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "time": {"type": "string"},
          "event": {"type": "string"},
          "actor": {"type": "string"}
        },
        "required": ["time", "event"]
      },
      "description": "Timeline of events"
    },
    "outcome": {
      "type": "string",
      "enum": ["success", "failure", "partial", "cancelled", "pending"],
      "description": "How it ended"
    },
    "outcome_details": {
      "type": "string",
      "description": "Details about the outcome"
    },
    "artifacts": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {"type": "string"},
          "type": {"type": "string"},
          "location": {"type": "string"}
        }
      },
      "description": "Related artifacts"
    },
    "lessons": {
      "type": "array",
      "items": {"type": "string"},
      "description": "Key takeaways"
    },
    "follow_up": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "action": {"type": "string"},
          "owner": {"type": "string"},
          "due": {"type": "string"},
          "status": {"type": "string"}
        }
      },
      "description": "Follow-up actions"
    },
    "decision_context": {
      "type": "object",
      "properties": {
        "context": {"type": "string"},
        "decision": {"type": "string"},
        "alternatives": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "option": {"type": "string"},
              "rejected_because": {"type": "string"}
            }
          }
        },
        "consequences": {
          "type": "object",
          "properties": {
            "positive": {"type": "array", "items": {"type": "string"}},
            "negative": {"type": "array", "items": {"type": "string"}},
            "neutral": {"type": "array", "items": {"type": "string"}}
          }
        }
      },
      "description": "For decision-type episodes"
    },
    "incident_context": {
      "type": "object",
      "properties": {
        "root_cause": {"type": "string"},
        "impact": {"type": "string"},
        "resolution": {"type": "string"},
        "prevention": {"type": "array", "items": {"type": "string"}}
      },
      "description": "For incident-type episodes"
    }
  }
}
